2025-10-28 19:27:29,666 - google_service - INFO - log_function_call:39 - Calling generate_response with params: {
  "prompt": "You are a travel query validator. Your sole purpose is to check if the user's query contains all the minimally required information to proceed with a travel search: {{user_query}}.You must check for the presence of four key pieces of information:1. **Origin:** The starting point of the travel.2. **Destination:** The ending point of the travel.3. **Start Date:** The departure date.4. **End Date:** The return date.A **budget** is optional and not required for validation.You must respond *only* with the `IsValid` structured output format.- If all four pieces of information are present, set `is_valid` to 'True'.- If *any* of the four pieces of information are missing, set `is_valid` to 'False' and provide a `reason` explaining *exactly* what is missing.",
  "tools": null,
  "structured_output": "<class 'travel_agent.domain.entities.IsValid'>",
  "temperature": 0.0
}
2025-10-28 19:27:30,089 - google_service - INFO - get_chain:29 - Structured output bound to LLM
2025-10-28 19:27:58,730 - google_service - INFO - log_function_call:39 - Calling generate_response with params: {
  "prompt": "You are a travel query validator. Your sole purpose is to check if the user's query contains all the minimally required information to proceed with a travel search: {{user_query}}.You must check for the presence of four key pieces of information:1. **Origin:** The starting point of the travel.2. **Destination:** The ending point of the travel.3. **Start Date:** The departure date.4. **End Date:** The return date.A **budget** is optional and not required for validation.You must respond *only* with the `IsValid` structured output format.- If all four pieces of information are present, set `is_valid` to 'True'.- If *any* of the four pieces of information are missing, set `is_valid` to 'False' and provide a `reason` explaining *exactly* what is missing.",
  "tools": null,
  "structured_output": "<class 'travel_agent.domain.entities.IsValid'>",
  "temperature": 0.0
}
2025-10-28 19:27:58,735 - google_service - INFO - get_chain:29 - Structured output bound to LLM
2025-10-28 19:28:22,214 - google_service - INFO - log_function_call:39 - Calling generate_response with params: {
  "prompt": "You are a travel query validator. Your sole purpose is to check if the user's query contains all the minimally required information to proceed with a travel search: {{user_query}}.You must check for the presence of four key pieces of information:1. **Origin:** The starting point of the travel.2. **Destination:** The ending point of the travel.3. **Start Date:** The departure date.4. **End Date:** The return date.A **budget** is optional and not required for validation.You must respond *only* with the `IsValid` structured output format.- If all four pieces of information are present, set `is_valid` to 'True'.- If *any* of the four pieces of information are missing, set `is_valid` to 'False' and provide a `reason` explaining *exactly* what is missing.",
  "tools": null,
  "structured_output": "<class 'travel_agent.domain.entities.IsValid'>",
  "temperature": 0.0
}
2025-10-28 19:28:22,220 - google_service - INFO - get_chain:29 - Structured output bound to LLM
2025-10-28 19:28:23,799 - google_service - INFO - log_function_call:39 - Calling generate_response with params: {
  "prompt": "\nYou are a precise information extraction agent. Your task is to extract key travel details from the user's query: {{user_query}}.\nScan the user's messages and extract the following four pieces of information:\n1. `origin`: The origin city or location (e.g., 'New York', 'Medellin').\n2. `destination`: The destination city or location (e.g., 'Paris', 'Tokyo').\n3. `start_date`: The departure date, formatted as YYYY-MM-DD.\n4. `end_date`: The return date, formatted as YYYY-MM-DD.\nA **budget** is optional and not required for extraction.\nWhen you have all the information, you must output it *only* in the `QueryExtractedInfo` structured format. Do not add any conversational text.\n",
  "tools": null,
  "structured_output": "<class 'travel_agent.domain.entities.QueryExtractedInfo'>",
  "temperature": 0.0
}
2025-10-28 19:28:23,805 - google_service - INFO - get_chain:29 - Structured output bound to LLM
2025-10-28 19:28:26,535 - google_service - INFO - log_function_call:39 - Calling generate_response with params: {
  "prompt": "\nYou are a location code specialist. Your goal is to find the IATA city codes for the origin and destination provided by the user: {{origin}} - {{destination}}.\n\nYou have access to a location_search tool that can find IATA codes for cities.\n\nInstructions:\n1. Use the location_search tool to search for the origin city (e.g., \"Nueva York\" -> search for \"Nueva York\")\n2. Use the location_search tool to search for the destination city (e.g., \"San Francisco\" -> search for \"San Francisco\")\n3. From the tool results, extract the most relevant IATA code for each city\n4. Present the results clearly showing the origin and destination codes\n\nExample:\n- For \"Nueva York\", you might find \"NYC\" \n- For \"San Francisco\", you might find \"SFO\"\n\nMake sure to call the tool for both cities and present the results clearly.\n\nWhen you have the results, you must continue with the next node in the workflow.\n",
  "tools": [
    "search_locations=<locations.application.search_locations.SearchLocations object at 0x00000216C70A4650>"
  ],
  "structured_output": null,
  "temperature": 0.0
}
2025-10-28 19:28:26,541 - google_service - INFO - get_chain:25 - Tools bound to LLM
2025-10-28 19:28:29,686 - google_service - INFO - log_function_call:39 - Calling generate_response with params: {
  "prompt": "\nYou are a location code specialist. Your goal is to find the IATA city codes for the origin and destination provided by the user: {{origin}} - {{destination}}.\n\nYou have access to a location_search tool that can find IATA codes for cities.\n\nInstructions:\n1. Use the location_search tool to search for the origin city (e.g., \"Nueva York\" -> search for \"Nueva York\")\n2. Use the location_search tool to search for the destination city (e.g., \"San Francisco\" -> search for \"San Francisco\")\n3. From the tool results, extract the most relevant IATA code for each city\n4. Present the results clearly showing the origin and destination codes\n\nExample:\n- For \"Nueva York\", you might find \"NYC\" \n- For \"San Francisco\", you might find \"SFO\"\n\nMake sure to call the tool for both cities and present the results clearly.\n\nWhen you have the results, you must continue with the next node in the workflow.\n",
  "tools": [
    "search_locations=<locations.application.search_locations.SearchLocations object at 0x00000216C70A4650>"
  ],
  "structured_output": null,
  "temperature": 0.0
}
2025-10-28 19:28:29,691 - google_service - INFO - get_chain:25 - Tools bound to LLM
2025-10-28 19:28:32,783 - google_service - INFO - log_function_call:39 - Calling generate_response with params: {
  "prompt": "\nYou are a location code specialist. Your goal is to find the IATA city codes for the origin and destination provided by the user: {{origin}} - {{destination}}.\n\nYou have access to a location_search tool that can find IATA codes for cities.\n\nInstructions:\n1. Use the location_search tool to search for the origin city (e.g., \"Nueva York\" -> search for \"Nueva York\")\n2. Use the location_search tool to search for the destination city (e.g., \"San Francisco\" -> search for \"San Francisco\")\n3. From the tool results, extract the most relevant IATA code for each city\n4. Present the results clearly showing the origin and destination codes\n\nExample:\n- For \"Nueva York\", you might find \"NYC\" \n- For \"San Francisco\", you might find \"SFO\"\n\nMake sure to call the tool for both cities and present the results clearly.\n\nWhen you have the results, you must continue with the next node in the workflow.\n",
  "tools": [
    "search_locations=<locations.application.search_locations.SearchLocations object at 0x00000216C70A4650>"
  ],
  "structured_output": null,
  "temperature": 0.0
}
2025-10-28 19:28:32,788 - google_service - INFO - get_chain:25 - Tools bound to LLM
2025-10-28 19:28:34,815 - google_service - INFO - log_function_call:39 - Calling generate_response with params: {
  "prompt": "\nYou are a location code processor. Your task is to process the location codes for the origin and destination.\n1. Use the origin and destination codes from the results of the location_search tool: {{origin_code}} - {{destination_code}}.\n2. Output the results in the `LocationSearchResult` structured format.\n3. Do not add any conversational text.\n",
  "tools": null,
  "structured_output": "<class 'locations.domain.location_entities.LocationSearchResult'>",
  "temperature": 0.0
}
2025-10-28 19:28:34,818 - google_service - INFO - get_chain:29 - Structured output bound to LLM
2025-10-28 19:28:35,696 - google_service - INFO - log_function_call:39 - Calling generate_response with params: {
  "prompt": "\n  You are a flight booking assistant. Your task is to find flight options for the user's trip.\n  \n  You have access to a flight_search tool that can find flight options for the user's trip.\n  Instructions:\n  1. Use the origin and destination to search for flight options: {{origin}} - {{destination}}.\n  2. Use the start and end dates to search for flight options: {{start_date}} - {{end_date}}.\n  3. Use the max price to search for flight options: {{budget}}.\n  4. Use the flight_search tool to search for flight options for the user's trip.\n  5. From the tool results, select the top 3-5 most relevant flight options.\n  6. Present the results clearly showing the flight options.\n  Do not add any conversational text.\n  \n  Make sure to call the tool for the origin, destination, start date, end date, and max price.\n",
  "tools": [
    "search_flights=<flights.application.search_flights.SearchFlights object at 0x00000216C70A5B50>"
  ],
  "structured_output": null,
  "temperature": 0.0
}
2025-10-28 19:28:35,703 - google_service - INFO - get_chain:25 - Tools bound to LLM
2025-10-28 19:28:42,399 - google_service - INFO - log_function_call:39 - Calling generate_response with params: {
  "prompt": "\n  You are a flight booking assistant. Your task is to find flight options for the user's trip.\n  \n  You have access to a flight_search tool that can find flight options for the user's trip.\n  Instructions:\n  1. Use the origin and destination to search for flight options: {{origin}} - {{destination}}.\n  2. Use the start and end dates to search for flight options: {{start_date}} - {{end_date}}.\n  3. Use the max price to search for flight options: {{budget}}.\n  4. Use the flight_search tool to search for flight options for the user's trip.\n  5. From the tool results, select the top 3-5 most relevant flight options.\n  6. Present the results clearly showing the flight options.\n  Do not add any conversational text.\n  \n  Make sure to call the tool for the origin, destination, start date, end date, and max price.\n",
  "tools": [
    "search_flights=<flights.application.search_flights.SearchFlights object at 0x00000216C70A5B50>"
  ],
  "structured_output": null,
  "temperature": 0.0
}
2025-10-28 19:28:42,405 - google_service - INFO - get_chain:25 - Tools bound to LLM
2025-10-28 19:28:45,373 - google_service - INFO - log_function_call:39 - Calling generate_response with params: {
  "prompt": "\nYou are a flight search result processor. Your task is to process the flight search results.\n1. Use the flight_results to create the proposal: {{flight_results}}.\n2. Output the results in the `FlightSearchResult` structured format.\n3. Do not add any conversational text.\n",
  "tools": null,
  "structured_output": "<class 'flights.domain.flights_entities.FlightSearchResult'>",
  "temperature": 0.0
}
2025-10-28 19:28:45,376 - google_service - INFO - get_chain:29 - Structured output bound to LLM
2025-10-28 19:28:47,517 - google_service - INFO - log_function_call:39 - Calling generate_response with params: {
  "prompt": "\nYou are a senior travel agent. Your task is to create a comprehensive, friendly, and clear travel proposal for the user.\nYou must use the following information to create the proposal:\n- Origin: {{origin}}\n- Destination: {{destination}}\n- Dates: {{start_date}} - {{end_date}}\n- Budget: {{budget}}\n- Flight Results: {{flight_results}}\n**CRITICAL INSTRUCTIONS:**\n1. Start with a friendly greeting.\n2. Clearly summarize the best flight option(s) found, including airline, price, and key times.\n3. Calculate a total estimated cost.\n4. Compare this total cost to the user's budget (if one was provided) and state if it's within, over, or under budget.\n5. If no results were found for flights, you *must* state this clearly.\n6. Conclude by presenting the proposal clearly. **Do not** ask the user for confirmation, just state the proposal.\n",
  "tools": null,
  "structured_output": null,
  "temperature": 0.0
}
2025-10-28 19:30:15,322 - google_service - INFO - log_function_call:39 - Calling generate_response with params: {
  "prompt": "You are a travel query validator. Your sole purpose is to check if the user's query contains all the minimally required information to proceed with a travel search: {{user_query}}.You must check for the presence of four key pieces of information:1. **Origin:** The starting point of the travel.2. **Destination:** The ending point of the travel.3. **Start Date:** The departure date.4. **End Date:** The return date.A **budget** is optional and not required for validation.You must respond *only* with the `IsValid` structured output format.- If all four pieces of information are present, set `is_valid` to 'True'.- If *any* of the four pieces of information are missing, set `is_valid` to 'False' and provide a `reason` explaining *exactly* what is missing.",
  "tools": null,
  "structured_output": "<class 'travel_agent.domain.entities.IsValid'>",
  "temperature": 0.0
}
2025-10-28 19:30:15,337 - google_service - INFO - get_chain:29 - Structured output bound to LLM
2025-10-28 19:30:17,963 - google_service - INFO - log_function_call:39 - Calling generate_response with params: {
  "prompt": "\nYou are a precise information extraction agent. Your task is to extract key travel details from the user's query: {{user_query}}.\nScan the user's messages and extract the following four pieces of information:\n1. `origin`: The origin city or location (e.g., 'New York', 'Medellin').\n2. `destination`: The destination city or location (e.g., 'Paris', 'Tokyo').\n3. `start_date`: The departure date, formatted as YYYY-MM-DD.\n4. `end_date`: The return date, formatted as YYYY-MM-DD.\nA **budget** is optional and not required for extraction.\nWhen you have all the information, you must output it *only* in the `QueryExtractedInfo` structured format. Do not add any conversational text.\n",
  "tools": null,
  "structured_output": "<class 'travel_agent.domain.entities.QueryExtractedInfo'>",
  "temperature": 0.0
}
2025-10-28 19:30:17,968 - google_service - INFO - get_chain:29 - Structured output bound to LLM
2025-10-28 19:30:21,609 - google_service - INFO - log_function_call:39 - Calling generate_response with params: {
  "prompt": "\nYou are a location code specialist. Your goal is to find the IATA city codes for the origin and destination provided by the user: {{origin}} - {{destination}}.\n\nYou have access to a location_search tool that can find IATA codes for cities.\n\nInstructions:\n1. Use the location_search tool to search for the origin city (e.g., \"Nueva York\" -> search for \"Nueva York\")\n2. Use the location_search tool to search for the destination city (e.g., \"San Francisco\" -> search for \"San Francisco\")\n3. From the tool results, extract the most relevant IATA code for each city\n4. Present the results clearly showing the origin and destination codes\n\nExample:\n- For \"Nueva York\", you might find \"NYC\" \n- For \"San Francisco\", you might find \"SFO\"\n\nMake sure to call the tool for both cities and present the results clearly.\n\nWhen you have the results, you must continue with the next node in the workflow.\n",
  "tools": [
    "search_locations=<locations.application.search_locations.SearchLocations object at 0x0000021208786A10>"
  ],
  "structured_output": null,
  "temperature": 0.0
}
2025-10-28 19:30:21,614 - google_service - INFO - get_chain:25 - Tools bound to LLM
2025-10-28 19:30:24,557 - google_service - INFO - log_function_call:39 - Calling generate_response with params: {
  "prompt": "\nYou are a location code specialist. Your goal is to find the IATA city codes for the origin and destination provided by the user: {{origin}} - {{destination}}.\n\nYou have access to a location_search tool that can find IATA codes for cities.\n\nInstructions:\n1. Use the location_search tool to search for the origin city (e.g., \"Nueva York\" -> search for \"Nueva York\")\n2. Use the location_search tool to search for the destination city (e.g., \"San Francisco\" -> search for \"San Francisco\")\n3. From the tool results, extract the most relevant IATA code for each city\n4. Present the results clearly showing the origin and destination codes\n\nExample:\n- For \"Nueva York\", you might find \"NYC\" \n- For \"San Francisco\", you might find \"SFO\"\n\nMake sure to call the tool for both cities and present the results clearly.\n\nWhen you have the results, you must continue with the next node in the workflow.\n",
  "tools": [
    "search_locations=<locations.application.search_locations.SearchLocations object at 0x0000021208786A10>"
  ],
  "structured_output": null,
  "temperature": 0.0
}
2025-10-28 19:30:24,562 - google_service - INFO - get_chain:25 - Tools bound to LLM
2025-10-28 19:30:26,861 - google_service - INFO - log_function_call:39 - Calling generate_response with params: {
  "prompt": "\nYou are a location code specialist. Your goal is to find the IATA city codes for the origin and destination provided by the user: {{origin}} - {{destination}}.\n\nYou have access to a location_search tool that can find IATA codes for cities.\n\nInstructions:\n1. Use the location_search tool to search for the origin city (e.g., \"Nueva York\" -> search for \"Nueva York\")\n2. Use the location_search tool to search for the destination city (e.g., \"San Francisco\" -> search for \"San Francisco\")\n3. From the tool results, extract the most relevant IATA code for each city\n4. Present the results clearly showing the origin and destination codes\n\nExample:\n- For \"Nueva York\", you might find \"NYC\" \n- For \"San Francisco\", you might find \"SFO\"\n\nMake sure to call the tool for both cities and present the results clearly.\n\nWhen you have the results, you must continue with the next node in the workflow.\n",
  "tools": [
    "search_locations=<locations.application.search_locations.SearchLocations object at 0x0000021208786A10>"
  ],
  "structured_output": null,
  "temperature": 0.0
}
2025-10-28 19:30:26,867 - google_service - INFO - get_chain:25 - Tools bound to LLM
2025-10-28 19:30:28,972 - google_service - INFO - log_function_call:39 - Calling generate_response with params: {
  "prompt": "\nYou are a location code processor. Your task is to process the location codes for the origin and destination.\n1. Use the origin and destination codes from the results of the location_search tool: {{origin_code}} - {{destination_code}}.\n2. Output the results in the `LocationSearchResult` structured format.\n3. Do not add any conversational text.\n",
  "tools": null,
  "structured_output": "<class 'locations.domain.location_entities.LocationSearchResult'>",
  "temperature": 0.0
}
2025-10-28 19:30:28,976 - google_service - INFO - get_chain:29 - Structured output bound to LLM
2025-10-28 19:30:30,175 - google_service - INFO - log_function_call:39 - Calling generate_response with params: {
  "prompt": "\n  You are a flight booking assistant. Your task is to find flight options for the user's trip.\n  \n  You have access to a flight_search tool that can find flight options for the user's trip.\n  Instructions:\n  1. Use the origin and destination to search for flight options: {{origin}} - {{destination}}.\n  2. Use the start and end dates to search for flight options: {{start_date}} - {{end_date}}.\n  3. Use the max price to search for flight options: {{budget}}.\n  4. Use the flight_search tool to search for flight options for the user's trip.\n  5. From the tool results, select the top 3-5 most relevant flight options.\n  6. Present the results clearly showing the flight options.\n  Do not add any conversational text.\n  \n  Make sure to call the tool for the origin, destination, start date, end date, and max price.\n",
  "tools": [
    "search_flights=<flights.application.search_flights.SearchFlights object at 0x000002120A089A10>"
  ],
  "structured_output": null,
  "temperature": 0.0
}
2025-10-28 19:30:30,183 - google_service - INFO - get_chain:25 - Tools bound to LLM
2025-10-28 19:30:35,990 - google_service - INFO - log_function_call:39 - Calling generate_response with params: {
  "prompt": "\n  You are a flight booking assistant. Your task is to find flight options for the user's trip.\n  \n  You have access to a flight_search tool that can find flight options for the user's trip.\n  Instructions:\n  1. Use the origin and destination to search for flight options: {{origin}} - {{destination}}.\n  2. Use the start and end dates to search for flight options: {{start_date}} - {{end_date}}.\n  3. Use the max price to search for flight options: {{budget}}.\n  4. Use the flight_search tool to search for flight options for the user's trip.\n  5. From the tool results, select the top 3-5 most relevant flight options.\n  6. Present the results clearly showing the flight options.\n  Do not add any conversational text.\n  \n  Make sure to call the tool for the origin, destination, start date, end date, and max price.\n",
  "tools": [
    "search_flights=<flights.application.search_flights.SearchFlights object at 0x000002120A089A10>"
  ],
  "structured_output": null,
  "temperature": 0.0
}
2025-10-28 19:30:36,001 - google_service - INFO - get_chain:25 - Tools bound to LLM
2025-10-28 19:30:39,153 - google_service - INFO - log_function_call:39 - Calling generate_response with params: {
  "prompt": "\nYou are a flight search result processor. Your task is to process the flight search results.\n1. Use the flight_results to create the proposal: {{flight_results}}.\n2. Output the results in the `FlightSearchResult` structured format.\n3. Do not add any conversational text.\n",
  "tools": null,
  "structured_output": "<class 'flights.domain.flights_entities.FlightSearchResult'>",
  "temperature": 0.0
}
2025-10-28 19:30:39,158 - google_service - INFO - get_chain:29 - Structured output bound to LLM
2025-10-28 19:30:40,751 - google_service - INFO - log_function_call:39 - Calling generate_response with params: {
  "prompt": "\nYou are a senior travel agent. Your task is to create a comprehensive, friendly, and clear travel proposal for the user.\nYou must use the following information to create the proposal:\n- Origin: {{origin}}\n- Destination: {{destination}}\n- Dates: {{start_date}} - {{end_date}}\n- Budget: {{budget}}\n- Flight Results: {{flight_results}}\n**CRITICAL INSTRUCTIONS:**\n1. Start with a friendly greeting.\n2. Clearly summarize the best flight option(s) found, including airline, price, and key times.\n3. Calculate a total estimated cost.\n4. Compare this total cost to the user's budget (if one was provided) and state if it's within, over, or under budget.\n5. If no results were found for flights, you *must* state this clearly.\n6. Conclude by presenting the proposal clearly. **Do not** ask the user for confirmation, just state the proposal.\n",
  "tools": null,
  "structured_output": null,
  "temperature": 0.0
}
2025-10-28 19:48:08,672 - google_service - INFO - log_function_call:39 - Calling generate_response with params: {
  "prompt": "You are a travel query validator. Your sole purpose is to check if the user's query contains all the minimally required information to proceed with a travel search: {{user_query}}.You must check for the presence of four key pieces of information:1. **Origin:** The starting point of the travel.2. **Destination:** The ending point of the travel.3. **Start Date:** The departure date.4. **End Date:** The return date.A **budget** is optional and not required for validation.You must respond *only* with the `IsValid` structured output format.- If all four pieces of information are present, set `is_valid` to 'True'.- If *any* of the four pieces of information are missing, set `is_valid` to 'False' and provide a `reason` explaining *exactly* what is missing.",
  "tools": null,
  "structured_output": "<class 'travel_agent.domain.entities.IsValid'>",
  "temperature": 0.0
}
2025-10-28 19:48:08,750 - google_service - INFO - get_chain:29 - Structured output bound to LLM
2025-10-28 19:48:10,903 - google_service - INFO - log_function_call:39 - Calling generate_response with params: {
  "prompt": "\nYou are a precise information extraction agent. Your task is to extract key travel details from the user's query: {{user_query}}.\nScan the user's messages and extract the following four pieces of information:\n1. `origin`: The origin city or location (e.g., 'New York', 'Medellin').\n2. `destination`: The destination city or location (e.g., 'Paris', 'Tokyo').\n3. `start_date`: The departure date, formatted as YYYY-MM-DD.\n4. `end_date`: The return date, formatted as YYYY-MM-DD.\nA **budget** is optional and not required for extraction.\nWhen you have all the information, you must output it *only* in the `QueryExtractedInfo` structured format. Do not add any conversational text.\n",
  "tools": null,
  "structured_output": "<class 'travel_agent.domain.entities.QueryExtractedInfo'>",
  "temperature": 0.0
}
2025-10-28 19:48:10,910 - google_service - INFO - get_chain:29 - Structured output bound to LLM
2025-10-28 19:48:12,769 - google_service - INFO - log_function_call:39 - Calling generate_response with params: {
  "prompt": "\nYou are a location code specialist. Your goal is to find the IATA city codes for the origin and destination provided by the user: {{origin}} - {{destination}}.\n\nYou have access to a location_search tool that can find IATA codes for cities.\n\nInstructions:\n1. Use the location_search tool to search for the origin city (e.g., \"Nueva York\" -> search for \"Nueva York\")\n2. Use the location_search tool to search for the destination city (e.g., \"San Francisco\" -> search for \"San Francisco\")\n3. From the tool results, extract the most relevant IATA code for each city\n4. Present the results clearly showing the origin and destination codes\n\nExample:\n- For \"Nueva York\", you might find \"NYC\" \n- For \"San Francisco\", you might find \"SFO\"\n\nMake sure to call the tool for both cities and present the results clearly.\n\nWhen you have the results, you must continue with the next node in the workflow.\n",
  "tools": [
    "search_locations=<locations.application.search_locations.SearchLocations object at 0x0000022858F715D0>"
  ],
  "structured_output": null,
  "temperature": 0.0
}
2025-10-28 19:48:12,774 - google_service - INFO - get_chain:25 - Tools bound to LLM
2025-10-28 19:48:16,044 - google_service - INFO - log_function_call:39 - Calling generate_response with params: {
  "prompt": "\nYou are a location code specialist. Your goal is to find the IATA city codes for the origin and destination provided by the user: {{origin}} - {{destination}}.\n\nYou have access to a location_search tool that can find IATA codes for cities.\n\nInstructions:\n1. Use the location_search tool to search for the origin city (e.g., \"Nueva York\" -> search for \"Nueva York\")\n2. Use the location_search tool to search for the destination city (e.g., \"San Francisco\" -> search for \"San Francisco\")\n3. From the tool results, extract the most relevant IATA code for each city\n4. Present the results clearly showing the origin and destination codes\n\nExample:\n- For \"Nueva York\", you might find \"NYC\" \n- For \"San Francisco\", you might find \"SFO\"\n\nMake sure to call the tool for both cities and present the results clearly.\n\nWhen you have the results, you must continue with the next node in the workflow.\n",
  "tools": [
    "search_locations=<locations.application.search_locations.SearchLocations object at 0x0000022858F715D0>"
  ],
  "structured_output": null,
  "temperature": 0.0
}
2025-10-28 19:48:16,048 - google_service - INFO - get_chain:25 - Tools bound to LLM
2025-10-28 19:48:18,219 - google_service - INFO - log_function_call:39 - Calling generate_response with params: {
  "prompt": "\nYou are a location code specialist. Your goal is to find the IATA city codes for the origin and destination provided by the user: {{origin}} - {{destination}}.\n\nYou have access to a location_search tool that can find IATA codes for cities.\n\nInstructions:\n1. Use the location_search tool to search for the origin city (e.g., \"Nueva York\" -> search for \"Nueva York\")\n2. Use the location_search tool to search for the destination city (e.g., \"San Francisco\" -> search for \"San Francisco\")\n3. From the tool results, extract the most relevant IATA code for each city\n4. Present the results clearly showing the origin and destination codes\n\nExample:\n- For \"Nueva York\", you might find \"NYC\" \n- For \"San Francisco\", you might find \"SFO\"\n\nMake sure to call the tool for both cities and present the results clearly.\n\nWhen you have the results, you must continue with the next node in the workflow.\n",
  "tools": [
    "search_locations=<locations.application.search_locations.SearchLocations object at 0x0000022858F715D0>"
  ],
  "structured_output": null,
  "temperature": 0.0
}
2025-10-28 19:48:18,224 - google_service - INFO - get_chain:25 - Tools bound to LLM
2025-10-28 19:48:19,887 - google_service - INFO - log_function_call:39 - Calling generate_response with params: {
  "prompt": "\nYou are a location code processor. Your task is to process the location codes for the origin and destination.\n1. Use the origin and destination codes from the results of the location_search tool: {{origin_code}} - {{destination_code}}.\n2. Output the results in the `LocationSearchResult` structured format.\n3. Do not add any conversational text.\n",
  "tools": null,
  "structured_output": "<class 'locations.domain.location_entities.LocationSearchResult'>",
  "temperature": 0.0
}
2025-10-28 19:48:19,892 - google_service - INFO - get_chain:29 - Structured output bound to LLM
2025-10-28 19:48:21,044 - google_service - INFO - log_function_call:39 - Calling generate_response with params: {
  "prompt": "\n  You are a flight booking assistant. Your task is to find flight options for the user's trip.\n  \n  You have access to a flight_search tool that can find flight options for the user's trip.\n  Instructions:\n  1. Use the origin and destination to search for flight options: {{origin}} - {{destination}}.\n  2. Use the start and end dates to search for flight options: {{start_date}} - {{end_date}}.\n  3. Use the max price to search for flight options: {{budget}}.\n  4. Use the flight_search tool to search for flight options for the user's trip.\n  5. From the tool results, select the top 3-5 most relevant flight options.\n  6. Present the results clearly showing the flight options.\n  Do not add any conversational text.\n  \n  Make sure to call the tool for the origin, destination, start date, end date, and max price.\n",
  "tools": [
    "search_flights=<flights.application.search_flights.SearchFlights object at 0x0000022858F99FD0>"
  ],
  "structured_output": null,
  "temperature": 0.0
}
2025-10-28 19:48:21,795 - google_service - INFO - get_chain:25 - Tools bound to LLM
2025-10-28 19:48:27,866 - google_service - INFO - log_function_call:39 - Calling generate_response with params: {
  "prompt": "\n  You are a flight booking assistant. Your task is to find flight options for the user's trip.\n  \n  You have access to a flight_search tool that can find flight options for the user's trip.\n  Instructions:\n  1. Use the origin and destination to search for flight options: {{origin}} - {{destination}}.\n  2. Use the start and end dates to search for flight options: {{start_date}} - {{end_date}}.\n  3. Use the max price to search for flight options: {{budget}}.\n  4. Use the flight_search tool to search for flight options for the user's trip.\n  5. From the tool results, select the top 3-5 most relevant flight options.\n  6. Present the results clearly showing the flight options.\n  Do not add any conversational text.\n  \n  Make sure to call the tool for the origin, destination, start date, end date, and max price.\n",
  "tools": [
    "search_flights=<flights.application.search_flights.SearchFlights object at 0x0000022858F99FD0>"
  ],
  "structured_output": null,
  "temperature": 0.0
}
2025-10-28 19:48:27,872 - google_service - INFO - get_chain:25 - Tools bound to LLM
2025-10-28 19:48:30,481 - google_service - INFO - log_function_call:39 - Calling generate_response with params: {
  "prompt": "\nYou are a flight search result processor. Your task is to process the flight search results.\n1. Use the flight_results to create the proposal: {{flight_results}}.\n2. Output the results in the `FlightSearchResult` structured format.\n3. Do not add any conversational text.\n",
  "tools": null,
  "structured_output": "<class 'flights.domain.flights_entities.FlightSearchResult'>",
  "temperature": 0.0
}
2025-10-28 19:48:30,487 - google_service - INFO - get_chain:29 - Structured output bound to LLM
2025-10-28 19:48:32,259 - google_service - INFO - log_function_call:39 - Calling generate_response with params: {
  "prompt": "\nYou are a senior travel agent. Your task is to create a comprehensive, friendly, and clear travel proposal for the user.\nYou must use the following information to create the proposal:\n- Origin: {{origin}}\n- Destination: {{destination}}\n- Dates: {{start_date}} - {{end_date}}\n- Budget: {{budget}}\n- Flight Results: {{flight_results}}\n**CRITICAL INSTRUCTIONS:**\n1. Start with a friendly greeting.\n2. Clearly summarize the best flight option(s) found, including airline, price, and key times.\n3. Calculate a total estimated cost.\n4. Compare this total cost to the user's budget (if one was provided) and state if it's within, over, or under budget.\n5. If no results were found for flights, you *must* state this clearly.\n6. Conclude by presenting the proposal clearly. **Do not** ask the user for confirmation, just state the proposal.\n",
  "tools": null,
  "structured_output": null,
  "temperature": 0.0
}
