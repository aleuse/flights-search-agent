2025-10-28 19:27:29,635 - workflow_nodes - INFO - check_user_query:23 - Starting check_user_query node
2025-10-28 19:27:29,635 - workflow_nodes - INFO - log_function_call:39 - Calling check_user_query with params: {
  "user_query": "hola!"
}
2025-10-28 19:27:30,091 - workflow_nodes - INFO - check_user_query:41 - Invoking response chain
2025-10-28 19:27:30,091 - workflow_nodes - INFO - log_function_call:39 - Calling invoke_response_chain with params: {
  "user_query": "hola!"
}
2025-10-28 19:27:31,899 - workflow_nodes - INFO - log_function_result:44 - invoke_response_chain completed successfully. Result: {
  "response": "is_valid='False' reason='Missing origin, destination, start date, and end date.'"
}
2025-10-28 19:27:58,728 - workflow_nodes - INFO - check_user_query:23 - Starting check_user_query node
2025-10-28 19:27:58,728 - workflow_nodes - INFO - log_function_call:39 - Calling check_user_query with params: {
  "user_query": "hola! me gustaria viajar desde Miami hasta Los Angeles"
}
2025-10-28 19:27:58,735 - workflow_nodes - INFO - check_user_query:41 - Invoking response chain
2025-10-28 19:27:58,736 - workflow_nodes - INFO - log_function_call:39 - Calling invoke_response_chain with params: {
  "user_query": "hola! me gustaria viajar desde Miami hasta Los Angeles"
}
2025-10-28 19:28:00,740 - workflow_nodes - INFO - log_function_result:44 - invoke_response_chain completed successfully. Result: {
  "response": "is_valid='False' reason='Missing Start Date, End Date'"
}
2025-10-28 19:28:22,214 - workflow_nodes - INFO - check_user_query:23 - Starting check_user_query node
2025-10-28 19:28:22,214 - workflow_nodes - INFO - log_function_call:39 - Calling check_user_query with params: {
  "user_query": "hola! me gustaria viajar desde Miami hasta Los Angeles, desde el 31 de octubre hasta el 2 de noviembre del 2025"
}
2025-10-28 19:28:22,221 - workflow_nodes - INFO - check_user_query:41 - Invoking response chain
2025-10-28 19:28:22,221 - workflow_nodes - INFO - log_function_call:39 - Calling invoke_response_chain with params: {
  "user_query": "hola! me gustaria viajar desde Miami hasta Los Angeles, desde el 31 de octubre hasta el 2 de noviembre del 2025"
}
2025-10-28 19:28:23,796 - workflow_nodes - INFO - log_function_result:44 - invoke_response_chain completed successfully. Result: {
  "response": "is_valid='True' reason=''"
}
2025-10-28 19:28:23,799 - workflow_nodes - INFO - extractor_node:61 - Starting extractor_node
2025-10-28 19:28:23,799 - workflow_nodes - INFO - log_function_call:39 - Calling extractor_node with params: {
  "messages_count": 2
}
2025-10-28 19:28:23,806 - workflow_nodes - INFO - extractor_node:77 - Invoking response chain for query information extraction
2025-10-28 19:28:26,532 - workflow_nodes - INFO - log_function_result:44 - extractor_node completed successfully. Result: {
  "response": "budget=None origin='Miami' destination='Los Angeles' start_date='2025-10-31' end_date='2025-11-02'"
}
2025-10-28 19:28:26,532 - workflow_nodes - INFO - log_function_result:44 - extractor_node completed successfully. Result: {
  "budget": null,
  "origin": "Miami",
  "destination": "Los Angeles",
  "start_date": "2025-10-31",
  "end_date": "2025-11-02"
}
2025-10-28 19:28:26,532 - workflow_nodes - INFO - extractor_node:101 - Query extraction completed. Origin: Miami, Destination: Los Angeles
2025-10-28 19:28:26,535 - workflow_nodes - INFO - location_search_node:108 - Starting location_search_node
2025-10-28 19:28:26,535 - workflow_nodes - INFO - log_function_call:39 - Calling location_search_node with params: {
  "origin": "Miami",
  "destination": "Los Angeles",
  "messages_count": 3
}
2025-10-28 19:28:26,567 - workflow_nodes - INFO - location_search_node:128 - Invoking response chain for location search
2025-10-28 19:28:28,341 - workflow_nodes - INFO - log_function_result:44 - location_search_node completed successfully. Result: {
  "response": "content=[\"\\n\\nOkay, I'm finding the IATA codes for Miami and Los Angeles.\", {'type': 'function_call_signature', 'signature': 'CrACAdHtim/xDawCmUcw0TP2btMQGnhcWVWYwJ2GnChrkEV+dKZVwcpuNLr9cQSO6BHqywiXjDI2penjADTSDRIHS9ecVSSBzcZGNKa9UWZV+w6YPRJqYOx6b9e1/etTRNx8tB2TqYHJqoyKHieOhJyT238cubWlQfu8me7e2x6ChLfRjMlgeo5NzJEA8lbvrY83IV35ZlAbgMFJaObY4rkGHWvRtLMWMU+W7X6XRyxHMGW3kkNjdbxXXf5wmMzX6v73g8ioe5imrs7qNLZPypO+wdYszF3lp5lvkWQkibmPlBf7B8PW8fi8QaH7lk978h0LURFOBMIkd4Oeqkxnpnk7hU+bPVC9mlLC6TtEiUFPNEHH/wZW+bPm4m1g+tj60aoNFeSr/9PsAPa+lM1zyj1ELw=='}] additional_kwargs={'function_call': {'name': 'location_search', 'arguments': '{\"city\": \"Miami\"}'}} response_metadata={'prompt_feedback': {'block_reason': 0, 'safety_ratings': []}, 'finish_reason': 'STOP', 'model_name': 'gemini-2.5-flash', 'safety_ratings': [], 'grounding_metadata': {}, 'model_provider': 'google_genai'} id='lc_run--13bc6d6c-4735-44dd-8d9d-c5639dc13206-0' tool_calls=[{'name': 'location_search', 'args': {'city': 'Miami'}, 'id': 'e902f849-1ebd-4dcd-a5d7-6c7919b5ffc4', 'type': 'tool_call'}] usage_metadata={'input_tokens': 331, 'output_tokens': 99, 'total_tokens': 430, 'input_token_details': {'cache_read': 0}, 'output_token_details': {'reasoning': 67}}"
}
2025-10-28 19:28:28,342 - workflow_nodes - INFO - log_function_result:44 - location_search_node completed successfully. Result: {
  "has_tool_calls": true,
  "response_type": "AIMessage"
}
2025-10-28 19:28:28,342 - workflow_nodes - INFO - location_search_node:146 - Location search node completed. Has tool calls: True
2025-10-28 19:28:29,686 - workflow_nodes - INFO - location_search_node:108 - Starting location_search_node
2025-10-28 19:28:29,686 - workflow_nodes - INFO - log_function_call:39 - Calling location_search_node with params: {
  "origin": "Miami",
  "destination": "Los Angeles",
  "messages_count": 5
}
2025-10-28 19:28:29,692 - workflow_nodes - INFO - location_search_node:128 - Invoking response chain for location search
2025-10-28 19:28:31,443 - workflow_nodes - INFO - log_function_result:44 - location_search_node completed successfully. Result: {
  "response": "content='' additional_kwargs={'function_call': {'name': 'location_search', 'arguments': '{\"city\": \"Los Angeles\"}'}} response_metadata={'prompt_feedback': {'block_reason': 0, 'safety_ratings': []}, 'finish_reason': 'STOP', 'model_name': 'gemini-2.5-flash', 'safety_ratings': [], 'grounding_metadata': {}, 'model_provider': 'google_genai'} id='lc_run--c53d42b7-9d1b-4f20-8518-b481d5657b82-0' tool_calls=[{'name': 'location_search', 'args': {'city': 'Los Angeles'}, 'id': '410803b4-95aa-405d-9b52-88d710d00380', 'type': 'tool_call'}] usage_metadata={'input_tokens': 436, 'output_tokens': 55, 'total_tokens': 491, 'input_token_details': {'cache_read': 0}, 'output_token_details': {'reasoning': 39}}"
}
2025-10-28 19:28:31,444 - workflow_nodes - INFO - log_function_result:44 - location_search_node completed successfully. Result: {
  "has_tool_calls": true,
  "response_type": "AIMessage"
}
2025-10-28 19:28:31,444 - workflow_nodes - INFO - location_search_node:146 - Location search node completed. Has tool calls: True
2025-10-28 19:28:32,782 - workflow_nodes - INFO - location_search_node:108 - Starting location_search_node
2025-10-28 19:28:32,783 - workflow_nodes - INFO - log_function_call:39 - Calling location_search_node with params: {
  "origin": "Miami",
  "destination": "Los Angeles",
  "messages_count": 7
}
2025-10-28 19:28:32,789 - workflow_nodes - INFO - location_search_node:128 - Invoking response chain for location search
2025-10-28 19:28:34,812 - workflow_nodes - INFO - log_function_result:44 - location_search_node completed successfully. Result: {
  "response": "content=[{'type': 'text', 'text': 'Aqu\u00ed est\u00e1n los c\u00f3digos IATA para tus ciudades:\\n\\nOrigen: Miami (MIA)\\nDestino: Los Angeles (LAX)', 'extras': {'signature': 'CrUCAdHtim+bI/68hahrqrwmh/8G5HMssBZw0fsXlLEkxN8HXLdrQGTkdMtOl5gy2wjaBi/zoAVWuxUOKvcSf79clOtghuOuOpt6tYM3QnTQbcEL0kVeRnnIcsNeBWH1iRy1MWoB3XRcxP3Vq9zTDYxrzhQsSNliFoJTRmo6od+sFfagsnb67B71/n6sal9nnG+8xw8UNbzVELabjcD4gYuJP+neLWUAfl3TOksLetp4ZjsYgpFle0JFN9xLs3F5CwEGney3lZgJSSc1MqxbIHXBV800ACh7rqgsHvn3qLmAXqcsr6cZgi8aXAO1ceHEjy3uf11J4B6zo1PYSfSxlWPa6X/RfajZ6VoBSY070x1A4pKj7HjZStp/3GKYRV4+7wFlCjWUvGqXijq5Z5wtAs0VzYwkUfeb'}}] additional_kwargs={} response_metadata={'prompt_feedback': {'block_reason': 0, 'safety_ratings': []}, 'finish_reason': 'STOP', 'model_name': 'gemini-2.5-flash', 'safety_ratings': [], 'grounding_metadata': {}, 'model_provider': 'google_genai'} id='lc_run--36a9c6ea-3799-4847-a9f4-6b0e156942a2-0' usage_metadata={'input_tokens': 521, 'output_tokens': 101, 'total_tokens': 622, 'input_token_details': {'cache_read': 0}, 'output_token_details': {'reasoning': 73}}"
}
2025-10-28 19:28:34,812 - workflow_nodes - INFO - log_function_result:44 - location_search_node completed successfully. Result: {
  "has_tool_calls": false,
  "response_type": "AIMessage"
}
2025-10-28 19:28:34,812 - workflow_nodes - INFO - location_search_node:146 - Location search node completed. Has tool calls: False
2025-10-28 19:28:34,815 - workflow_nodes - INFO - process_location_results:156 - Starting process_location_results
2025-10-28 19:28:34,815 - workflow_nodes - INFO - log_function_call:39 - Calling process_location_results with params: {
  "messages_count": 8
}
2025-10-28 19:28:34,819 - workflow_nodes - INFO - process_location_results:175 - Invoking response chain for location results processing
2025-10-28 19:28:35,693 - workflow_nodes - INFO - log_function_result:44 - process_location_results completed successfully. Result: {
  "response": "origin_code='MIA' destination_code='LAX'"
}
2025-10-28 19:28:35,693 - workflow_nodes - INFO - log_function_result:44 - process_location_results completed successfully. Result: {
  "origin_code": "MIA",
  "destination_code": "LAX"
}
2025-10-28 19:28:35,694 - workflow_nodes - INFO - process_location_results:193 - Location results processed. Origin: MIA, Destination: LAX
2025-10-28 19:28:35,695 - workflow_nodes - INFO - flight_search_node:202 - Starting flight_search_node
2025-10-28 19:28:35,695 - workflow_nodes - INFO - log_function_call:39 - Calling flight_search_node with params: {
  "origin": "Miami",
  "destination": "Los Angeles",
  "start_date": "2025-10-31",
  "end_date": "2025-11-02",
  "budget": null,
  "messages_count": 9
}
2025-10-28 19:28:35,705 - workflow_nodes - INFO - flight_search_node:224 - Invoking response chain for flight search
2025-10-28 19:28:37,418 - workflow_nodes - INFO - log_function_result:44 - flight_search_node completed successfully. Result: {
  "response": "content=\" start_date='2025-10-31' end_date='2025-11-02' max_price=None\" additional_kwargs={'function_call': {'name': 'flight_search', 'arguments': '{\"max_price\": null, \"end_date\": \"2025-11-02\", \"destination_code\": \"LAX\", \"start_date\": \"2025-10-31\", \"origin_code\": \"MIA\"}'}} response_metadata={'prompt_feedback': {'block_reason': 0, 'safety_ratings': []}, 'finish_reason': 'STOP', 'model_name': 'gemini-2.5-flash', 'safety_ratings': [], 'grounding_metadata': {}, 'model_provider': 'google_genai'} id='lc_run--01b12007-4c72-4be9-bf59-7f6c7e02e2f2-0' tool_calls=[{'name': 'flight_search', 'args': {'max_price': None, 'end_date': '2025-11-02', 'destination_code': 'LAX', 'start_date': '2025-10-31', 'origin_code': 'MIA'}, 'id': 'e9688f85-c28f-433f-9a7a-a505fb19e68e', 'type': 'tool_call'}] usage_metadata={'input_tokens': 702, 'output_tokens': 99, 'total_tokens': 801, 'input_token_details': {'cache_read': 0}}"
}
2025-10-28 19:28:37,418 - workflow_nodes - INFO - log_function_result:44 - flight_search_node completed successfully. Result: {
  "has_tool_calls": true,
  "response_type": "AIMessage"
}
2025-10-28 19:28:37,418 - workflow_nodes - INFO - log_function_result:44 - flight_search_node completed successfully. Result: {
  "response_type": "AIMessage"
}
2025-10-28 19:28:37,418 - workflow_nodes - INFO - flight_search_node:244 - Flight search node completed. Has tool calls: True
2025-10-28 19:28:42,398 - workflow_nodes - INFO - flight_search_node:202 - Starting flight_search_node
2025-10-28 19:28:42,399 - workflow_nodes - INFO - log_function_call:39 - Calling flight_search_node with params: {
  "origin": "Miami",
  "destination": "Los Angeles",
  "start_date": "2025-10-31",
  "end_date": "2025-11-02",
  "budget": null,
  "messages_count": 11
}
2025-10-28 19:28:42,407 - workflow_nodes - INFO - flight_search_node:224 - Invoking response chain for flight search
2025-10-28 19:28:45,368 - workflow_nodes - INFO - log_function_result:44 - flight_search_node completed successfully. Result: {
  "response": "content=[{'type': 'text', 'text': 'Aqu\u00ed tienes una opci\u00f3n de vuelo de Miami a Los \u00c1ngeles:\\n\\n*   **Aerol\u00ednea:** NK\\n*   **Precio:** $457.95\\n*   **Salida:** 31 de octubre de 2025, 21:30\\n*   **Llegada:** 3 de noviembre de 2025, 18:26\\n*   **Duraci\u00f3n:** 18h 48m / 15h 33m\\n*   **Origen:** MIA\\n*   **Destino:** LAX', 'extras': {'signature': 'CrMEAdHtim99OL/Qwsp6ovIt9K0CJwcIG6Fz+ioCPw9uJ4jpl0Ny6EGdHPKBEynR45ZLlOBglKool7KDZY5WeMXsqJYhS7Eepd17rQmNg1UuRQdsDu2DQy9oFudAVL8U+inPp6s4majBEyAt5yAHZ1GHZJG3x/zRN4E2P93nYtaruEiAwpSCIQBAOIxdOyHt2xy/Yo7RA00dHqbsjlufleIeF/KSsq5wXzJ38VykH6rg6YXUVmn7zW9v7Rk1JtHTbmyfI2NI7a8gIW1E9g4TQV1tgZEK9F0LrmDoBStOnQSiji4k8dwscMbD/97z1mJDxIo2lmdpGsPWVjb61WF4bkYbokIoXyUYzT0unhd5qU/9iRyrCtlHaIbEbb6n2FUB0kMoj7j7FVSiqfuhFbxIXW/xMITGMoXOBhFudrXHSgXtkLqaxKC0PviKWg//sr/vdWAJuYscsDVgv/ixz2mL2lgBUawqYc9yud2w9qXcru+YA+2fc4OWydgYqwjSEjlBi983R1IivDvlDUw+uOEJcGc67mLGQcg48Ffnly9TkPU64ABQ9EIBVzWT1+xZ6b7wJLiwFoI3Ir9o+zN2Vbjguxznj3fjCEUYZhseOyeFBjggbAL9bCFUAKRnw0M1XKU1XC/urAX0/xASPBjC7jjqtEURJYVWpFZiChClg3M8oH4L0vYiUCNU69sLFCdVqFzD6rf4W2UxrEb/60LOIJ4Tc70jiacyITx0bMFxLustw/jD+iJj6ns='}}] additional_kwargs={} response_metadata={'prompt_feedback': {'block_reason': 0, 'safety_ratings': []}, 'finish_reason': 'STOP', 'model_name': 'gemini-2.5-flash', 'safety_ratings': [], 'grounding_metadata': {}, 'model_provider': 'google_genai'} id='lc_run--24d8cf44-fe19-41a9-9f07-a57dcc454150-0' usage_metadata={'input_tokens': 888, 'output_tokens': 296, 'total_tokens': 1184, 'input_token_details': {'cache_read': 645}, 'output_token_details': {'reasoning': 172}}"
}
2025-10-28 19:28:45,368 - workflow_nodes - INFO - log_function_result:44 - flight_search_node completed successfully. Result: {
  "has_tool_calls": false,
  "response_type": "AIMessage"
}
2025-10-28 19:28:45,368 - workflow_nodes - INFO - log_function_result:44 - flight_search_node completed successfully. Result: {
  "response_type": "AIMessage"
}
2025-10-28 19:28:45,369 - workflow_nodes - INFO - flight_search_node:244 - Flight search node completed. Has tool calls: False
2025-10-28 19:28:45,371 - workflow_nodes - INFO - process_flight_results:258 - Starting process_flight_results
2025-10-28 19:28:45,371 - workflow_nodes - INFO - log_function_call:39 - Calling process_flight_results with params: {
  "messages_count": 12
}
2025-10-28 19:28:45,377 - workflow_nodes - INFO - process_flight_results:276 - Invoking response chain for flight results processing
2025-10-28 19:28:47,515 - workflow_nodes - INFO - log_function_result:44 - process_flight_results completed successfully. Result: {
  "response": "flight_results='Aqu\u00ed tienes una opci\u00f3n de vuelo de Miami a Los \u00c1ngeles:\\n\\n*   **Aerol\u00ednea:** NK\\n*   **Precio:** $457.95\\n*   **Salida:** 31 de octubre de 2025, 21:30\\n*   **Llegada:** 3 de noviembre de 2025, 18:26\\n*   **Duraci\u00f3n:** 18h 48m / 15h 33m\\n*   **Origen:** MIA\\n*   **Destino:** LAX'"
}
2025-10-28 19:28:47,515 - workflow_nodes - INFO - log_function_result:44 - process_flight_results completed successfully. Result: {
  "flight_results": "Aqu\u00ed tienes una opci\u00f3n de vuelo de Miami a Los \u00c1ngeles:\n\n*   **Aerol\u00ednea:** NK\n*   **Precio:** $457.95\n*   **Salida:** 31 de octubre de 2025, 21:30\n*   **Llegada:** 3 de noviembre de 2025, 18:26\n*   **Duraci\u00f3n:** 18h 48m / 15h 33m\n*   **Origen:** MIA\n*   **Destino:** LAX"
}
2025-10-28 19:28:47,515 - workflow_nodes - INFO - process_flight_results:291 - Flight results processed. Flight results: Aquí tienes una opción de vuelo de Miami a Los Ángeles:

*   **Aerolínea:** NK
*   **Precio:** $457.95
*   **Salida:** 31 de octubre de 2025, 21:30
*   **Llegada:** 3 de noviembre de 2025, 18:26
*   **Duración:** 18h 48m / 15h 33m
*   **Origen:** MIA
*   **Destino:** LAX
2025-10-28 19:28:47,517 - workflow_nodes - INFO - proposal_node:300 - Starting proposal_node
2025-10-28 19:28:47,517 - workflow_nodes - INFO - log_function_call:39 - Calling proposal_node with params: {
  "budget": null,
  "origin": "Miami",
  "destination": "Los Angeles",
  "start_date": "2025-10-31",
  "end_date": "2025-11-02",
  "messages_count": 13
}
2025-10-28 19:28:47,522 - workflow_nodes - INFO - proposal_node:321 - Invoking response chain for travel proposal generation
2025-10-28 19:28:50,558 - workflow_nodes - INFO - log_function_result:44 - proposal_node completed successfully. Result: {
  "response": "content=[\" budget='None' dates='2025-10-31 - 2025-11-02' destination='Los Angeles' origin='Miami'\", '\u00a1Hola!\\n\\n\u00a1Me complace presentarte tu propuesta de viaje de Miami a Los \u00c1ngeles!\\n\\nHemos encontrado una excelente opci\u00f3n de vuelo para tus fechas de viaje:\\n\\n**Detalles del Vuelo:**\\n\\n*   **Aerol\u00ednea:** NK\\n*   **Precio:** $457.95\\n*   **Salida de Miami (MIA):** 31 de octubre de 2025, 21:30\\n*   **Llegada a Los \u00c1ngeles (LAX):** 3 de noviembre de 2025, 18:26\\n*   **Duraci\u00f3n del viaje:** 18h 48m / 15h 33m (dependiendo de la escala)\\n\\n**Costo Total Estimado:**\\n\\n*   El costo total estimado para este vuelo es de **$457.95**.\\n\\nDado que no se proporcion\u00f3 un presupuesto espec\u00edfico, no podemos comparar este costo.\\n\\n**Propuesta de Viaje:**\\n\\nTu viaje de Miami a Los \u00c1ngeles, del 31 de octubre al 2 de noviembre de 2025, se propone con la opci\u00f3n de vuelo detallada anteriormente, con un costo total estimado de $457.95.'] additional_kwargs={} response_metadata={'prompt_feedback': {'block_reason': 0, 'safety_ratings': []}, 'finish_reason': 'STOP', 'model_name': 'gemini-2.5-flash', 'safety_ratings': [], 'grounding_metadata': {}, 'model_provider': 'google_genai'} id='lc_run--13845ce2-9347-413b-8f20-e64efd384bcc-0' usage_metadata={'input_tokens': 1084, 'output_tokens': 304, 'total_tokens': 1388, 'input_token_details': {'cache_read': 0}}"
}
2025-10-28 19:28:50,559 - workflow_nodes - INFO - log_function_result:44 - proposal_node completed successfully. Result: {
  "response_type": "AIMessage"
}
2025-10-28 19:28:50,559 - workflow_nodes - INFO - proposal_node:336 - Travel proposal generation completed successfully
2025-10-28 19:30:15,316 - workflow_nodes - INFO - check_user_query:23 - Starting check_user_query node
2025-10-28 19:30:15,317 - workflow_nodes - INFO - log_function_call:39 - Calling check_user_query with params: {
  "user_query": "hola! me gustaria viajar desde Miami hasta Los Angeles, desde el 31 de octubre hasta el 2 de noviembre del 2025"
}
2025-10-28 19:30:15,339 - workflow_nodes - INFO - check_user_query:41 - Invoking response chain
2025-10-28 19:30:15,339 - workflow_nodes - INFO - log_function_call:39 - Calling invoke_response_chain with params: {
  "user_query": "hola! me gustaria viajar desde Miami hasta Los Angeles, desde el 31 de octubre hasta el 2 de noviembre del 2025"
}
2025-10-28 19:30:17,960 - workflow_nodes - INFO - log_function_result:44 - invoke_response_chain completed successfully. Result: {
  "response": "is_valid='True' reason=''"
}
2025-10-28 19:30:17,963 - workflow_nodes - INFO - extractor_node:61 - Starting extractor_node
2025-10-28 19:30:17,963 - workflow_nodes - INFO - log_function_call:39 - Calling extractor_node with params: {
  "messages_count": 2
}
2025-10-28 19:30:17,969 - workflow_nodes - INFO - extractor_node:77 - Invoking response chain for query information extraction
2025-10-28 19:30:21,604 - workflow_nodes - INFO - log_function_result:44 - extractor_node completed successfully. Result: {
  "response": "budget=None origin='Miami' destination='Los Angeles' start_date='2025-10-31' end_date='2025-11-02'"
}
2025-10-28 19:30:21,604 - workflow_nodes - INFO - log_function_result:44 - extractor_node completed successfully. Result: {
  "budget": null,
  "origin": "Miami",
  "destination": "Los Angeles",
  "start_date": "2025-10-31",
  "end_date": "2025-11-02"
}
2025-10-28 19:30:21,605 - workflow_nodes - INFO - extractor_node:101 - Query extraction completed. Origin: Miami, Destination: Los Angeles
2025-10-28 19:30:21,608 - workflow_nodes - INFO - location_search_node:108 - Starting location_search_node
2025-10-28 19:30:21,608 - workflow_nodes - INFO - log_function_call:39 - Calling location_search_node with params: {
  "origin": "Miami",
  "destination": "Los Angeles",
  "messages_count": 3
}
2025-10-28 19:30:21,615 - workflow_nodes - INFO - location_search_node:128 - Invoking response chain for location search
2025-10-28 19:30:23,410 - workflow_nodes - INFO - log_function_result:44 - location_search_node completed successfully. Result: {
  "response": "content=[\"\\n\\nOkay, I'll find the IATA codes for Miami and Los Angeles.\", {'type': 'function_call_signature', 'signature': 'CrACAdHtim8Yf03EaxMdlKXWfZ5haLYDJ/3qlAD+16GwtKMVNHc9+ZXgIP6aOUCYTtfa0e04W4uinXwWLhmbh295HuvUU0hOIFIIZmAL3S0PeaisGoOerW3trCO83WtImGtq71XaY/hEY5XLTTqU3qmforPyc6Xww9dxqADflO+74iuo+/wcBpy3WNLV7jIFfDP3fNkp+r9jL2hZ9jpwwycRkCPhO9V+SHlj963ivMFHcXZjAIDIp9YchvUiAo/paPZjezQw86kfOWjoq97EBK7AIvTYXI1f4aKxN+yqCoCXohHI3J2nfZ5LmoX81UcuAxobf52ejOBfQzxeJF8ZEl8vXoXEo+MXZbzns5iQyhUxuNhL0u91lJLO7yHVQB+Cja9dYXMH8vqyODwa5tDAJTqZIw=='}] additional_kwargs={'function_call': {'name': 'location_search', 'arguments': '{\"city\": \"Miami\"}'}} response_metadata={'prompt_feedback': {'block_reason': 0, 'safety_ratings': []}, 'finish_reason': 'STOP', 'model_name': 'gemini-2.5-flash', 'safety_ratings': [], 'grounding_metadata': {}, 'model_provider': 'google_genai'} id='lc_run--5090d0be-2f4c-443f-a1a7-6a26807dbd03-0' tool_calls=[{'name': 'location_search', 'args': {'city': 'Miami'}, 'id': '36f7f9ec-a3d3-4b9b-8986-f0e3401f5804', 'type': 'tool_call'}] usage_metadata={'input_tokens': 331, 'output_tokens': 99, 'total_tokens': 430, 'input_token_details': {'cache_read': 0}, 'output_token_details': {'reasoning': 67}}"
}
2025-10-28 19:30:23,411 - workflow_nodes - INFO - log_function_result:44 - location_search_node completed successfully. Result: {
  "has_tool_calls": true,
  "response_type": "AIMessage"
}
2025-10-28 19:30:23,411 - workflow_nodes - INFO - location_search_node:146 - Location search node completed. Has tool calls: True
2025-10-28 19:30:24,556 - workflow_nodes - INFO - location_search_node:108 - Starting location_search_node
2025-10-28 19:30:24,557 - workflow_nodes - INFO - log_function_call:39 - Calling location_search_node with params: {
  "origin": "Miami",
  "destination": "Los Angeles",
  "messages_count": 5
}
2025-10-28 19:30:24,563 - workflow_nodes - INFO - location_search_node:128 - Invoking response chain for location search
2025-10-28 19:30:25,706 - workflow_nodes - INFO - log_function_result:44 - location_search_node completed successfully. Result: {
  "response": "content='' additional_kwargs={'function_call': {'name': 'location_search', 'arguments': '{\"city\": \"Los Angeles\"}'}} response_metadata={'prompt_feedback': {'block_reason': 0, 'safety_ratings': []}, 'finish_reason': 'STOP', 'model_name': 'gemini-2.5-flash', 'safety_ratings': [], 'grounding_metadata': {}, 'model_provider': 'google_genai'} id='lc_run--c0a283f5-44b7-4e60-9aed-3cd0abdf7520-0' tool_calls=[{'name': 'location_search', 'args': {'city': 'Los Angeles'}, 'id': '455a6124-991a-4027-8001-dd128d670710', 'type': 'tool_call'}] usage_metadata={'input_tokens': 436, 'output_tokens': 16, 'total_tokens': 452, 'input_token_details': {'cache_read': 0}}"
}
2025-10-28 19:30:25,707 - workflow_nodes - INFO - log_function_result:44 - location_search_node completed successfully. Result: {
  "has_tool_calls": true,
  "response_type": "AIMessage"
}
2025-10-28 19:30:25,707 - workflow_nodes - INFO - location_search_node:146 - Location search node completed. Has tool calls: True
2025-10-28 19:30:26,860 - workflow_nodes - INFO - location_search_node:108 - Starting location_search_node
2025-10-28 19:30:26,860 - workflow_nodes - INFO - log_function_call:39 - Calling location_search_node with params: {
  "origin": "Miami",
  "destination": "Los Angeles",
  "messages_count": 7
}
2025-10-28 19:30:26,868 - workflow_nodes - INFO - location_search_node:128 - Invoking response chain for location search
2025-10-28 19:30:28,968 - workflow_nodes - INFO - log_function_result:44 - location_search_node completed successfully. Result: {
  "response": "content=[{'type': 'text', 'text': 'Aqu\u00ed est\u00e1n los c\u00f3digos IATA para tus ciudades:\\n\\nOrigen: Miami (MIA)\\nDestino: Los Angeles (LAX)', 'extras': {'signature': 'CrUCAdHtim9PEIl0/Td6vtEkqlybjF5uXHxld43MorRmDdCYl2QtpNTf2T/vahGbbm8mME/c8ci9B/Z0JnE/odw5qIOgK039WROIxcpC6o6OXwmRKeq9KVwduhjC2rf4oXuf5ovmmIa6+ZkEVerUsNH9UEwb9qOmXKdPaZMjeOj1ywZoaMKCeXnKTZH0RBobrEznvALEPi2wrRDO25/l0KoxUFzmgeJwIBvFdzqYLzjeu5KRLkWaulnWw2isYYC0yrMQdp2m6k7R+P752qYr9kxok2N0hgpaDA/KAZUJFR3+R3QqsOgoAneIBgxzQDTO10fQ0AyNf0YSlywDjwjaic+3wOjaUvNFAn6XVd/n82+l4SjzA27MzQFVytcv5cck4kgljAV/KoQRFO+x6A4SSR8fwAne84VX'}}] additional_kwargs={} response_metadata={'prompt_feedback': {'block_reason': 0, 'safety_ratings': []}, 'finish_reason': 'STOP', 'model_name': 'gemini-2.5-flash', 'safety_ratings': [], 'grounding_metadata': {}, 'model_provider': 'google_genai'} id='lc_run--7ceca602-8e60-4db2-a8ab-f10f7ac4ac30-0' usage_metadata={'input_tokens': 521, 'output_tokens': 101, 'total_tokens': 622, 'input_token_details': {'cache_read': 0}, 'output_token_details': {'reasoning': 73}}"
}
2025-10-28 19:30:28,969 - workflow_nodes - INFO - log_function_result:44 - location_search_node completed successfully. Result: {
  "has_tool_calls": false,
  "response_type": "AIMessage"
}
2025-10-28 19:30:28,969 - workflow_nodes - INFO - location_search_node:146 - Location search node completed. Has tool calls: False
2025-10-28 19:30:28,972 - workflow_nodes - INFO - process_location_results:156 - Starting process_location_results
2025-10-28 19:30:28,972 - workflow_nodes - INFO - log_function_call:39 - Calling process_location_results with params: {
  "messages_count": 8
}
2025-10-28 19:30:28,976 - workflow_nodes - INFO - process_location_results:175 - Invoking response chain for location results processing
2025-10-28 19:30:30,173 - workflow_nodes - INFO - log_function_result:44 - process_location_results completed successfully. Result: {
  "response": "origin_code='MIA' destination_code='LAX'"
}
2025-10-28 19:30:30,173 - workflow_nodes - INFO - log_function_result:44 - process_location_results completed successfully. Result: {
  "origin_code": "MIA",
  "destination_code": "LAX"
}
2025-10-28 19:30:30,173 - workflow_nodes - INFO - process_location_results:193 - Location results processed. Origin: MIA, Destination: LAX
2025-10-28 19:30:30,174 - workflow_nodes - INFO - flight_search_node:202 - Starting flight_search_node
2025-10-28 19:30:30,174 - workflow_nodes - INFO - log_function_call:39 - Calling flight_search_node with params: {
  "origin": "Miami",
  "destination": "Los Angeles",
  "start_date": "2025-10-31",
  "end_date": "2025-11-02",
  "budget": null,
  "messages_count": 9
}
2025-10-28 19:30:30,184 - workflow_nodes - INFO - flight_search_node:224 - Invoking response chain for flight search
2025-10-28 19:30:31,877 - workflow_nodes - INFO - log_function_result:44 - flight_search_node completed successfully. Result: {
  "response": "content=\" start_date='2025-10-31' end_date='2025-11-02' max_price=None\" additional_kwargs={'function_call': {'name': 'flight_search', 'arguments': '{\"max_price\": null, \"end_date\": \"2025-11-02\", \"destination_code\": \"LAX\", \"start_date\": \"2025-10-31\", \"origin_code\": \"MIA\"}'}} response_metadata={'prompt_feedback': {'block_reason': 0, 'safety_ratings': []}, 'finish_reason': 'STOP', 'model_name': 'gemini-2.5-flash', 'safety_ratings': [], 'grounding_metadata': {}, 'model_provider': 'google_genai'} id='lc_run--4c35ca69-f0fb-479e-aec9-0de07d674677-0' tool_calls=[{'name': 'flight_search', 'args': {'max_price': None, 'end_date': '2025-11-02', 'destination_code': 'LAX', 'start_date': '2025-10-31', 'origin_code': 'MIA'}, 'id': '5adacd74-5550-403c-8a08-aeaf7dc49abe', 'type': 'tool_call'}] usage_metadata={'input_tokens': 702, 'output_tokens': 99, 'total_tokens': 801, 'input_token_details': {'cache_read': 593}}"
}
2025-10-28 19:30:31,877 - workflow_nodes - INFO - log_function_result:44 - flight_search_node completed successfully. Result: {
  "has_tool_calls": true,
  "response_type": "AIMessage"
}
2025-10-28 19:30:31,877 - workflow_nodes - INFO - log_function_result:44 - flight_search_node completed successfully. Result: {
  "response_type": "AIMessage"
}
2025-10-28 19:30:31,877 - workflow_nodes - INFO - flight_search_node:244 - Flight search node completed. Has tool calls: True
2025-10-28 19:30:35,989 - workflow_nodes - INFO - flight_search_node:202 - Starting flight_search_node
2025-10-28 19:30:35,989 - workflow_nodes - INFO - log_function_call:39 - Calling flight_search_node with params: {
  "origin": "Miami",
  "destination": "Los Angeles",
  "start_date": "2025-10-31",
  "end_date": "2025-11-02",
  "budget": null,
  "messages_count": 11
}
2025-10-28 19:30:36,004 - workflow_nodes - INFO - flight_search_node:224 - Invoking response chain for flight search
2025-10-28 19:30:39,148 - workflow_nodes - INFO - log_function_result:44 - flight_search_node completed successfully. Result: {
  "response": "content=[{'type': 'text', 'text': 'Aqu\u00ed tienes una opci\u00f3n de vuelo de Miami a Los \u00c1ngeles:\\n\\n*   **Aerol\u00ednea:** NK\\n*   **Precio:** $457.95\\n*   **Salida:** 31 de octubre de 2025, 21:30\\n*   **Llegada:** 3 de noviembre de 2025, 18:26\\n*   **Duraci\u00f3n:** 18h 48m / 15h 33m\\n*   **Origen:** MIA\\n*   **Destino:** LAX', 'extras': {'signature': 'CrMEAdHtim8myKWMTF3XbE5D1EGVgvwdYN1yJn6IQZaMrYq/gV+fP2aKWlV18PLkqChp0oLx6OFxfCuUael0/TLheQ7Oj2Or4xvcOowCC8qH+zSLT7WTWvrzL3Xl6N1eHWE18kL2SlZb0MFXNIVHKurQr0wEnLU5jKuh4MwRYy//7BcHm81ibDBTNcvI+dzqH2JVAhQJmLwdxLHWvCAojcM45Dvy/bW5TUCrUwvOdYnagbFUL3mKX0cXh4cpWMLEAsFGW8Ext9b+F1/vf5ukcM8hp6z/BppNJ2LqbjsNp5ej6iirISZveUV2GtCbNJyPVs0L64+Mu+a+oVAq8CJ47yKrTjCrAEp6RUcohT8x98OyvBh042DtuVTbJbl66VPhKn7MOrBgSvTcPTif5FWhsJvrhOFuASjDSrQbV+WUy7sqMSbZ0RfeAotKIbWCN2Cw59vle9dfdXa+CeVzSUV9Swb5q92Bed0U3WQocWjsHi8p2lRX9Eag7vfwB7FgKR0ffBixVVQtaeUDEAjrpji8Ir7mfZ9APZ0mVupkHHFuYFFlcrajSc7XfrgIFhZcOTzv+A7r2ta5j+K8vsu+q/Lw5FbYtT281egw6FW45AE6MdBsf9gyoZLYP9bmSDnbS896MQkWOxc51xgfcEJDI/5Fm68E6yoh90v9YEMP6j8PhyXNw75IpCOoIppRD5VoAC4mQppA3jYWlWC5tEboUB1I1GI8YZQHW6kqY9lS3EDENjg7fCbCVK8='}}] additional_kwargs={} response_metadata={'prompt_feedback': {'block_reason': 0, 'safety_ratings': []}, 'finish_reason': 'STOP', 'model_name': 'gemini-2.5-flash', 'safety_ratings': [], 'grounding_metadata': {}, 'model_provider': 'google_genai'} id='lc_run--1bf1eafc-f5fb-42a3-b940-0824f0a1f99b-0' usage_metadata={'input_tokens': 888, 'output_tokens': 296, 'total_tokens': 1184, 'input_token_details': {'cache_read': 645}, 'output_token_details': {'reasoning': 172}}"
}
2025-10-28 19:30:39,148 - workflow_nodes - INFO - log_function_result:44 - flight_search_node completed successfully. Result: {
  "has_tool_calls": false,
  "response_type": "AIMessage"
}
2025-10-28 19:30:39,148 - workflow_nodes - INFO - log_function_result:44 - flight_search_node completed successfully. Result: {
  "response_type": "AIMessage"
}
2025-10-28 19:30:39,148 - workflow_nodes - INFO - flight_search_node:244 - Flight search node completed. Has tool calls: False
2025-10-28 19:30:39,152 - workflow_nodes - INFO - process_flight_results:258 - Starting process_flight_results
2025-10-28 19:30:39,153 - workflow_nodes - INFO - log_function_call:39 - Calling process_flight_results with params: {
  "messages_count": 12
}
2025-10-28 19:30:39,159 - workflow_nodes - INFO - process_flight_results:276 - Invoking response chain for flight results processing
2025-10-28 19:30:40,749 - workflow_nodes - INFO - log_function_result:44 - process_flight_results completed successfully. Result: {
  "response": "flight_results='Aqu\u00ed tienes una opci\u00f3n de vuelo de Miami a Los \u00c1ngeles:\\n\\n*   **Aerol\u00ednea:** NK\\n*   **Precio:** $457.95\\n*   **Salida:** 31 de octubre de 2025, 21:30\\n*   **Llegada:** 3 de noviembre de 2025, 18:26\\n*   **Duraci\u00f3n:** 18h 48m / 15h 33m\\n*   **Origen:** MIA\\n*   **Destino:** LAX'"
}
2025-10-28 19:30:40,749 - workflow_nodes - INFO - log_function_result:44 - process_flight_results completed successfully. Result: {
  "flight_results": "Aqu\u00ed tienes una opci\u00f3n de vuelo de Miami a Los \u00c1ngeles:\n\n*   **Aerol\u00ednea:** NK\n*   **Precio:** $457.95\n*   **Salida:** 31 de octubre de 2025, 21:30\n*   **Llegada:** 3 de noviembre de 2025, 18:26\n*   **Duraci\u00f3n:** 18h 48m / 15h 33m\n*   **Origen:** MIA\n*   **Destino:** LAX"
}
2025-10-28 19:30:40,749 - workflow_nodes - INFO - process_flight_results:291 - Flight results processed. Flight results: Aquí tienes una opción de vuelo de Miami a Los Ángeles:

*   **Aerolínea:** NK
*   **Precio:** $457.95
*   **Salida:** 31 de octubre de 2025, 21:30
*   **Llegada:** 3 de noviembre de 2025, 18:26
*   **Duración:** 18h 48m / 15h 33m
*   **Origen:** MIA
*   **Destino:** LAX
2025-10-28 19:30:40,751 - workflow_nodes - INFO - proposal_node:300 - Starting proposal_node
2025-10-28 19:30:40,751 - workflow_nodes - INFO - log_function_call:39 - Calling proposal_node with params: {
  "budget": null,
  "origin": "Miami",
  "destination": "Los Angeles",
  "start_date": "2025-10-31",
  "end_date": "2025-11-02",
  "messages_count": 13
}
2025-10-28 19:30:40,755 - workflow_nodes - INFO - proposal_node:321 - Invoking response chain for travel proposal generation
2025-10-28 19:30:43,498 - workflow_nodes - INFO - log_function_result:44 - proposal_node completed successfully. Result: {
  "response": "content=[\" budget='None' dates='2025-10-31 - 2025-11-02' destination='Los Angeles' origin='Miami'\", '\u00a1Hola!\\n\\n\u00a1Me complace presentarte tu propuesta de viaje de Miami a Los \u00c1ngeles!\\n\\nHemos encontrado una excelente opci\u00f3n de vuelo para tus fechas de viaje:\\n\\n**Detalles del Vuelo:**\\n\\n*   **Aerol\u00ednea:** NK\\n*   **Precio:** $457.95\\n*   **Salida de Miami (MIA):** 31 de octubre de 2025, 21:30\\n*   **Llegada a Los \u00c1ngeles (LAX):** 3 de noviembre de 2025, 18:26\\n*   **Duraci\u00f3n del viaje:** 18h 48m / 15h 33m (dependiendo de la escala)\\n\\n**Costo Total Estimado:**\\n\\n*   El costo total estimado para este vuelo es de **$457.95**.\\n\\nDado que no se proporcion\u00f3 un presupuesto espec\u00edfico, no podemos comparar este costo.\\n\\n**Propuesta de Viaje:**\\n\\nTu viaje de Miami a Los \u00c1ngeles, del 31 de octubre al 2 de noviembre de 2025, se propone con la opci\u00f3n de vuelo detallada anteriormente, con un costo total estimado de $457.95.'] additional_kwargs={} response_metadata={'prompt_feedback': {'block_reason': 0, 'safety_ratings': []}, 'finish_reason': 'STOP', 'model_name': 'gemini-2.5-flash', 'safety_ratings': [], 'grounding_metadata': {}, 'model_provider': 'google_genai'} id='lc_run--9fc89d8d-609b-4655-a319-0ee01e362da0-0' usage_metadata={'input_tokens': 1084, 'output_tokens': 304, 'total_tokens': 1388, 'input_token_details': {'cache_read': 799}}"
}
2025-10-28 19:30:43,498 - workflow_nodes - INFO - log_function_result:44 - proposal_node completed successfully. Result: {
  "response_type": "AIMessage"
}
2025-10-28 19:30:43,499 - workflow_nodes - INFO - proposal_node:336 - Travel proposal generation completed successfully
2025-10-28 19:48:08,638 - workflow_nodes - INFO - check_user_query:23 - Starting check_user_query node
2025-10-28 19:48:08,638 - workflow_nodes - INFO - log_function_call:39 - Calling check_user_query with params: {
  "user_query": "hola! me gustaria viajar desde Miami hasta Los Angeles, desde el 31 de octubre hasta el 2 de noviembre del 2025"
}
2025-10-28 19:48:08,752 - workflow_nodes - INFO - check_user_query:41 - Invoking response chain
2025-10-28 19:48:08,752 - workflow_nodes - INFO - log_function_call:39 - Calling invoke_response_chain with params: {
  "user_query": "hola! me gustaria viajar desde Miami hasta Los Angeles, desde el 31 de octubre hasta el 2 de noviembre del 2025"
}
2025-10-28 19:48:10,899 - workflow_nodes - INFO - log_function_result:44 - invoke_response_chain completed successfully. Result: {
  "response": "is_valid='True' reason=''"
}
2025-10-28 19:48:10,903 - workflow_nodes - INFO - extractor_node:61 - Starting extractor_node
2025-10-28 19:48:10,903 - workflow_nodes - INFO - log_function_call:39 - Calling extractor_node with params: {
  "messages_count": 2
}
2025-10-28 19:48:10,912 - workflow_nodes - INFO - extractor_node:77 - Invoking response chain for query information extraction
2025-10-28 19:48:12,764 - workflow_nodes - INFO - log_function_result:44 - extractor_node completed successfully. Result: {
  "response": "budget=None origin='Miami' destination='Los Angeles' start_date='2025-10-31' end_date='2025-11-02'"
}
2025-10-28 19:48:12,764 - workflow_nodes - INFO - log_function_result:44 - extractor_node completed successfully. Result: {
  "budget": null,
  "origin": "Miami",
  "destination": "Los Angeles",
  "start_date": "2025-10-31",
  "end_date": "2025-11-02"
}
2025-10-28 19:48:12,764 - workflow_nodes - INFO - extractor_node:101 - Query extraction completed. Origin: Miami, Destination: Los Angeles
2025-10-28 19:48:12,768 - workflow_nodes - INFO - location_search_node:108 - Starting location_search_node
2025-10-28 19:48:12,768 - workflow_nodes - INFO - log_function_call:39 - Calling location_search_node with params: {
  "origin": "Miami",
  "destination": "Los Angeles",
  "messages_count": 3
}
2025-10-28 19:48:12,775 - workflow_nodes - INFO - location_search_node:128 - Invoking response chain for location search
2025-10-28 19:48:14,645 - workflow_nodes - INFO - log_function_result:44 - location_search_node completed successfully. Result: {
  "response": "content=[\"\\n\\nOkay, I'm finding the IATA codes for Miami and Los Angeles.\", {'type': 'function_call_signature', 'signature': 'CrACAdHtim/8CDRpYp1qfqj096wCmzumvwloMVv5HJb7/+nDs5g3Cg3rHmYiCdiLcKe0Rkg3TyMY0DzCmaVXmMhs9BsPBZZ8M/sllfzgODzzo0+xmppoCcVeY+OJdEChu6xVLWsFl3XZlwHdyjlFti+IRlMcK4dUC/L2LEAHdfcddPZMtY3EqfPZvX3PUPp46LDz61IZIzQ2WtaiMD48CFewbWKDHIXpa1zOwBeqWy9PlTHU+gxhnf1I5lszGRO+r9YguVJz/1Zwiww9Xd3vShHZJfGVaQnkgTpEVUI9OjlI2Maym4ng0oZIDD9kSAGhg4UgMbHpJnQoq5UcOMqrXr4PYPacEcvOUxYR1WSPw+k16zgteir7ZGICsNA9jDY3GxAZHP2X6Xy3orghN9uL94SZlw=='}] additional_kwargs={'function_call': {'name': 'location_search', 'arguments': '{\"city\": \"Miami\"}'}} response_metadata={'prompt_feedback': {'block_reason': 0, 'safety_ratings': []}, 'finish_reason': 'STOP', 'model_name': 'gemini-2.5-flash', 'safety_ratings': [], 'grounding_metadata': {}, 'model_provider': 'google_genai'} id='lc_run--54e95f90-e259-4b22-85bb-99c9ce96331d-0' tool_calls=[{'name': 'location_search', 'args': {'city': 'Miami'}, 'id': '177ac723-7b58-4f3f-bb7d-7758fc9e4614', 'type': 'tool_call'}] usage_metadata={'input_tokens': 331, 'output_tokens': 99, 'total_tokens': 430, 'input_token_details': {'cache_read': 0}, 'output_token_details': {'reasoning': 67}}"
}
2025-10-28 19:48:14,647 - workflow_nodes - INFO - log_function_result:44 - location_search_node completed successfully. Result: {
  "has_tool_calls": true,
  "response_type": "AIMessage"
}
2025-10-28 19:48:14,647 - workflow_nodes - INFO - location_search_node:146 - Location search node completed. Has tool calls: True
2025-10-28 19:48:16,043 - workflow_nodes - INFO - location_search_node:108 - Starting location_search_node
2025-10-28 19:48:16,043 - workflow_nodes - INFO - log_function_call:39 - Calling location_search_node with params: {
  "origin": "Miami",
  "destination": "Los Angeles",
  "messages_count": 5
}
2025-10-28 19:48:16,049 - workflow_nodes - INFO - location_search_node:128 - Invoking response chain for location search
2025-10-28 19:48:17,245 - workflow_nodes - INFO - log_function_result:44 - location_search_node completed successfully. Result: {
  "response": "content='' additional_kwargs={'function_call': {'name': 'location_search', 'arguments': '{\"city\": \"Los Angeles\"}'}} response_metadata={'prompt_feedback': {'block_reason': 0, 'safety_ratings': []}, 'finish_reason': 'STOP', 'model_name': 'gemini-2.5-flash', 'safety_ratings': [], 'grounding_metadata': {}, 'model_provider': 'google_genai'} id='lc_run--527cd453-5619-4ded-b0e6-eb80cdccdfbf-0' tool_calls=[{'name': 'location_search', 'args': {'city': 'Los Angeles'}, 'id': '9e5952a8-eec5-4bec-818d-c831ed71b77b', 'type': 'tool_call'}] usage_metadata={'input_tokens': 436, 'output_tokens': 16, 'total_tokens': 452, 'input_token_details': {'cache_read': 0}}"
}
2025-10-28 19:48:17,245 - workflow_nodes - INFO - log_function_result:44 - location_search_node completed successfully. Result: {
  "has_tool_calls": true,
  "response_type": "AIMessage"
}
2025-10-28 19:48:17,245 - workflow_nodes - INFO - location_search_node:146 - Location search node completed. Has tool calls: True
2025-10-28 19:48:18,218 - workflow_nodes - INFO - location_search_node:108 - Starting location_search_node
2025-10-28 19:48:18,218 - workflow_nodes - INFO - log_function_call:39 - Calling location_search_node with params: {
  "origin": "Miami",
  "destination": "Los Angeles",
  "messages_count": 7
}
2025-10-28 19:48:18,225 - workflow_nodes - INFO - location_search_node:128 - Invoking response chain for location search
2025-10-28 19:48:19,882 - workflow_nodes - INFO - log_function_result:44 - location_search_node completed successfully. Result: {
  "response": "content=[{'type': 'text', 'text': 'Aqu\u00ed est\u00e1n los c\u00f3digos IATA para tus ciudades:\\n\\nOrigen: Miami (MIA)\\nDestino: Los Angeles (LAX)', 'extras': {'signature': 'CrUCAdHtim/9gDP4L9TEgyB9Bhhl3kNIgEwIJhyuFO64J2QXGVo7zoQ470GnI0Fdbzt1Jsw+lHkzxQCcVrEei1DmyJrdjbWthLdg0UyTtPaXYAaTdTKXxHMMpqhRPPeBw5Qm5FBs57oNHJwu40BO9lmW7j+cvWDqmuKdUbQ0zoRKZpFT9Yujr69EECPlmy+hyPReFCt8v88iArYJfmFbG9f5Hq21cQqxCfwcMOjMDxdE/ZePUvRbUkxGXeRIlk9Niw+kUXiT7lwdaWkkP1L3wYZh2ZfH3vi3HaP3VwIQQFNK9V98LOI+E03e0CsJDBRntumCi7mBt019khKGBID5GV1MjJgCPcAmq5K4TCzeyAhUl4A+LZaFIKvP39OIzSI64ku8MGVUAojMiwrWk51ksCJsFmO5XxPX'}}] additional_kwargs={} response_metadata={'prompt_feedback': {'block_reason': 0, 'safety_ratings': []}, 'finish_reason': 'STOP', 'model_name': 'gemini-2.5-flash', 'safety_ratings': [], 'grounding_metadata': {}, 'model_provider': 'google_genai'} id='lc_run--8ca49352-c86e-4d56-a5f1-5e807cc38775-0' usage_metadata={'input_tokens': 521, 'output_tokens': 101, 'total_tokens': 622, 'input_token_details': {'cache_read': 0}, 'output_token_details': {'reasoning': 73}}"
}
2025-10-28 19:48:19,883 - workflow_nodes - INFO - log_function_result:44 - location_search_node completed successfully. Result: {
  "has_tool_calls": false,
  "response_type": "AIMessage"
}
2025-10-28 19:48:19,883 - workflow_nodes - INFO - location_search_node:146 - Location search node completed. Has tool calls: False
2025-10-28 19:48:19,886 - workflow_nodes - INFO - process_location_results:156 - Starting process_location_results
2025-10-28 19:48:19,886 - workflow_nodes - INFO - log_function_call:39 - Calling process_location_results with params: {
  "messages_count": 8
}
2025-10-28 19:48:19,893 - workflow_nodes - INFO - process_location_results:175 - Invoking response chain for location results processing
2025-10-28 19:48:21,041 - workflow_nodes - INFO - log_function_result:44 - process_location_results completed successfully. Result: {
  "response": "origin_code='MIA' destination_code='LAX'"
}
2025-10-28 19:48:21,041 - workflow_nodes - INFO - log_function_result:44 - process_location_results completed successfully. Result: {
  "origin_code": "MIA",
  "destination_code": "LAX"
}
2025-10-28 19:48:21,041 - workflow_nodes - INFO - process_location_results:193 - Location results processed. Origin: MIA, Destination: LAX
2025-10-28 19:48:21,044 - workflow_nodes - INFO - flight_search_node:202 - Starting flight_search_node
2025-10-28 19:48:21,044 - workflow_nodes - INFO - log_function_call:39 - Calling flight_search_node with params: {
  "origin": "Miami",
  "destination": "Los Angeles",
  "start_date": "2025-10-31",
  "end_date": "2025-11-02",
  "budget": null,
  "messages_count": 9
}
2025-10-28 19:48:21,796 - workflow_nodes - INFO - flight_search_node:224 - Invoking response chain for flight search
2025-10-28 19:48:23,522 - workflow_nodes - INFO - log_function_result:44 - flight_search_node completed successfully. Result: {
  "response": "content=\" start_date='2025-10-31' end_date='2025-11-02' max_price=None\" additional_kwargs={'function_call': {'name': 'flight_search', 'arguments': '{\"max_price\": null, \"end_date\": \"2025-11-02\", \"destination_code\": \"LAX\", \"start_date\": \"2025-10-31\", \"origin_code\": \"MIA\"}'}} response_metadata={'prompt_feedback': {'block_reason': 0, 'safety_ratings': []}, 'finish_reason': 'STOP', 'model_name': 'gemini-2.5-flash', 'safety_ratings': [], 'grounding_metadata': {}, 'model_provider': 'google_genai'} id='lc_run--2ccbb02f-4208-41c7-b004-0a06c8d9e23f-0' tool_calls=[{'name': 'flight_search', 'args': {'max_price': None, 'end_date': '2025-11-02', 'destination_code': 'LAX', 'start_date': '2025-10-31', 'origin_code': 'MIA'}, 'id': '69db6162-6569-425e-a21d-52141c03f632', 'type': 'tool_call'}] usage_metadata={'input_tokens': 702, 'output_tokens': 99, 'total_tokens': 801, 'input_token_details': {'cache_read': 0}}"
}
2025-10-28 19:48:23,522 - workflow_nodes - INFO - log_function_result:44 - flight_search_node completed successfully. Result: {
  "has_tool_calls": true,
  "response_type": "AIMessage"
}
2025-10-28 19:48:23,522 - workflow_nodes - INFO - log_function_result:44 - flight_search_node completed successfully. Result: {
  "response_type": "AIMessage"
}
2025-10-28 19:48:23,522 - workflow_nodes - INFO - flight_search_node:244 - Flight search node completed. Has tool calls: True
2025-10-28 19:48:27,866 - workflow_nodes - INFO - flight_search_node:202 - Starting flight_search_node
2025-10-28 19:48:27,866 - workflow_nodes - INFO - log_function_call:39 - Calling flight_search_node with params: {
  "origin": "Miami",
  "destination": "Los Angeles",
  "start_date": "2025-10-31",
  "end_date": "2025-11-02",
  "budget": null,
  "messages_count": 11
}
2025-10-28 19:48:27,873 - workflow_nodes - INFO - flight_search_node:224 - Invoking response chain for flight search
2025-10-28 19:48:30,476 - workflow_nodes - INFO - log_function_result:44 - flight_search_node completed successfully. Result: {
  "response": "content=[{'type': 'text', 'text': 'Aqu\u00ed tienes una opci\u00f3n de vuelo:\\n\\n**Opci\u00f3n 1**\\n*   **Precio:** 457.95 EUR\\n*   **Ida:** MIA -> LAS -> LAX (Duraci\u00f3n: 18h 48m)\\n*   **Vuelta:** LAX -> MSY -> MIA (Duraci\u00f3n: 15h 33m)\\n*   **Aerol\u00ednea:** NK', 'extras': {'signature': 'CucDAdHtim9LRhuMWocfNL4ivoI5vs25OhI2b0m/altiHnbaK68Edok6ErDcoOFc6Xyt3uO5VeCMc3sjefuCz+o+DiN0IAqX93th2pge7D5P2JzQOycUlmCeO/ZV4AJBFEcumdqK+ycaLM9veU/aOG/iCqIaL/9obCWp+ZBoNMt95jtkxVfnSdHek6HwGj8dcWN5Qi1hkBfC06bf6hCMWZ8WV+pe87TngI12NRhKOHtQGEbf5HLc69z8mzjRvtlGxcrLPjcfztjlso+ri7XYhRlQtt3tO6ui9tzemTrGoX/6eoyaC0gj8TBf60Wl9UxPYBwhH2smxKUQ1dZssni4XIyolsEEbn0p8GBZyQAmyD7RHTAsmvW6Ng8/00RI01elx62dlKw6mmo65eVTrthPXp6U0JjMYcr9C30z9DzJ6jAVxFCrjROTJsl/Rh2lGYYRIVheGA99WIZ2pyarYs2saiJfoJL+iooyjr3HZ/3WJm1Y8maC/Zu9mJv1wYT57x2IaA26Z+nNziXfesiQyG1zj2PERcUevm77I7I5vWwc33cGiWREFCRfh0eiLtqwF3K8If/xNs6/mebxtcFmXkehlwKvk5e0v/rOYOFznJPyl7WQWEz/x5u0hY1DfQKCHOEue3K+Bg9mr0Eixg=='}}] additional_kwargs={} response_metadata={'prompt_feedback': {'block_reason': 0, 'safety_ratings': []}, 'finish_reason': 'STOP', 'model_name': 'gemini-2.5-flash', 'safety_ratings': [], 'grounding_metadata': {}, 'model_provider': 'google_genai'} id='lc_run--31aa44db-38e9-4744-b3a1-350c4123d9ef-0' usage_metadata={'input_tokens': 852, 'output_tokens': 246, 'total_tokens': 1098, 'input_token_details': {'cache_read': 635}, 'output_token_details': {'reasoning': 156}}"
}
2025-10-28 19:48:30,477 - workflow_nodes - INFO - log_function_result:44 - flight_search_node completed successfully. Result: {
  "has_tool_calls": false,
  "response_type": "AIMessage"
}
2025-10-28 19:48:30,477 - workflow_nodes - INFO - log_function_result:44 - flight_search_node completed successfully. Result: {
  "response_type": "AIMessage"
}
2025-10-28 19:48:30,478 - workflow_nodes - INFO - flight_search_node:244 - Flight search node completed. Has tool calls: False
2025-10-28 19:48:30,481 - workflow_nodes - INFO - process_flight_results:258 - Starting process_flight_results
2025-10-28 19:48:30,481 - workflow_nodes - INFO - log_function_call:39 - Calling process_flight_results with params: {
  "messages_count": 12
}
2025-10-28 19:48:30,487 - workflow_nodes - INFO - process_flight_results:276 - Invoking response chain for flight results processing
2025-10-28 19:48:32,256 - workflow_nodes - INFO - log_function_result:44 - process_flight_results completed successfully. Result: {
  "response": "flight_results='Aqu\u00ed tienes una opci\u00f3n de vuelo:\\n\\n**Opci\u00f3n 1**\\n*   **Precio:** 457.95 EUR\\n*   **Ida:** MIA -> LAS -> LAX (Duraci\u00f3n: 18h 48m)\\n*   **Vuelta:** LAX -> MSY -> MIA (Duraci\u00f3n: 15h 33m)\\n*   **Aerol\u00ednea:** NK'"
}
2025-10-28 19:48:32,257 - workflow_nodes - INFO - log_function_result:44 - process_flight_results completed successfully. Result: {
  "flight_results": "Aqu\u00ed tienes una opci\u00f3n de vuelo:\n\n**Opci\u00f3n 1**\n*   **Precio:** 457.95 EUR\n*   **Ida:** MIA -> LAS -> LAX (Duraci\u00f3n: 18h 48m)\n*   **Vuelta:** LAX -> MSY -> MIA (Duraci\u00f3n: 15h 33m)\n*   **Aerol\u00ednea:** NK"
}
2025-10-28 19:48:32,257 - workflow_nodes - INFO - process_flight_results:291 - Flight results processed. Flight results: Aquí tienes una opción de vuelo:

**Opción 1**
*   **Precio:** 457.95 EUR
*   **Ida:** MIA -> LAS -> LAX (Duración: 18h 48m)
*   **Vuelta:** LAX -> MSY -> MIA (Duración: 15h 33m)
*   **Aerolínea:** NK
2025-10-28 19:48:32,258 - workflow_nodes - INFO - proposal_node:300 - Starting proposal_node
2025-10-28 19:48:32,259 - workflow_nodes - INFO - log_function_call:39 - Calling proposal_node with params: {
  "budget": null,
  "origin": "Miami",
  "destination": "Los Angeles",
  "start_date": "2025-10-31",
  "end_date": "2025-11-02",
  "messages_count": 13
}
2025-10-28 19:48:32,263 - workflow_nodes - INFO - proposal_node:321 - Invoking response chain for travel proposal generation
2025-10-28 19:48:35,542 - workflow_nodes - INFO - log_function_result:44 - proposal_node completed successfully. Result: {
  "response": "content=[\"\\nbudget='None'\\norigin='Miami'\\ndestination='Los Angeles'\\ndates='2025-10-31 - 2025-11-02'\", '\u00a1Hola!\\n\\n\u00a1Qu\u00e9 emoci\u00f3n planificar tu viaje de Miami a Los \u00c1ngeles! He encontrado una excelente opci\u00f3n de vuelo para tus fechas.\\n\\n---\\n\\n### **Resumen de tu Propuesta de Viaje**\\n\\n**Origen:** Miami (MIA)\\n**Destino:** Los \u00c1ngeles (LAX)\\n**Fechas:** 31 de octubre de 2025 - 2 de noviembre de 2025\\n\\n---\\n\\n### **Detalles del Vuelo Encontrado**\\n\\nAqu\u00ed tienes la mejor opci\u00f3n de vuelo que he encontrado para ti:\\n\\n**Opci\u00f3n 1**\\n*   **Aerol\u00ednea:** NK (Spirit Airlines)\\n*   **Precio:** 457.95 EUR\\n*   **Vuelo de Ida:**\\n    *   **Ruta:** Miami (MIA) -> Las Vegas (LAS) -> Los \u00c1ngeles (LAX)\\n    *   **Duraci\u00f3n Total:** 18 horas y 48 minutos\\n*   **Vuelo de Vuelta:**\\n    *   **Ruta:** Los \u00c1ngeles (LAX) -> Nueva Orleans (MSY) -> Miami (MIA)\\n    *   **Duraci\u00f3n Total:** 15 horas y 33 minutos\\n\\n---\\n\\n### **Costo Estimado Total**\\n\\n*   **Costo del Vuelo:** 457.95 EUR\\n\\n**Costo Total Estimado:** 457.95 EUR\\n\\n---\\n\\n### **Comparaci\u00f3n con tu Presupuesto**\\n\\nNo proporcionaste un presupuesto espec\u00edfico para este viaje, por lo que no puedo comparar el costo total. Sin embargo, este es el precio del vuelo encontrado.\\n\\n---\\n\\n### **Tu Propuesta de Viaje**\\n\\nTu viaje de Miami a Los \u00c1ngeles, del 31 de octubre al 2 de noviembre de 2025, tiene una opci\u00f3n de vuelo disponible con la aerol\u00ednea NK por un total de 457.95 EUR. El vuelo de ida incluye una escala en Las Vegas y el de vuelta una escala en Nueva Orleans.'] additional_kwargs={} response_metadata={'prompt_feedback': {'block_reason': 0, 'safety_ratings': []}, 'finish_reason': 'STOP', 'model_name': 'gemini-2.5-flash', 'safety_ratings': [], 'grounding_metadata': {}, 'model_provider': 'google_genai'} id='lc_run--4bb758f6-3d18-49ea-aad9-6742dbf49c20-0' usage_metadata={'input_tokens': 942, 'output_tokens': 475, 'total_tokens': 1417, 'input_token_details': {'cache_read': 0}}"
}
2025-10-28 19:48:35,542 - workflow_nodes - INFO - log_function_result:44 - proposal_node completed successfully. Result: {
  "response_type": "AIMessage"
}
2025-10-28 19:48:35,543 - workflow_nodes - INFO - proposal_node:336 - Travel proposal generation completed successfully
